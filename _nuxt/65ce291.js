(window.webpackJsonp=window.webpackJsonp||[]).push([[28,11,20,21],{596:function(t,e,r){"use strict";r.r(e);r(47);var n=r(94),o=r(561),l=Object(n.b)({setup:function(){var t=Object(o.a)(),e=Object(n.f)(!1);Object(n.d)((function(){t.connectWallet()}));return{showAccountChoose:e,selectAccount:function(e){t.setActiveAccount(e)},addressShort:function(address){return address.slice(0,6)+"..."+address.slice(-4)},wallet:t}}}),c=r(28),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"relative p-1 flex items-center w-full space-x-4 justify-end"},[r("div",{staticClass:"w-128"},[t.wallet.selectedAccount.account?r("div",{staticClass:"mt-1 relative"},[r("button",{staticClass:"relative w-full bg-white dark:bg-gray-600 dark:text-white rounded-md shadow-lg pl-3 pr-10 py-3 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 dark:focus:ring-white sm:text-sm",attrs:{type:"button"},on:{click:function(){return t.showAccountChoose=!t.showAccountChoose}}},[r("span",{staticClass:"flex items-center"},[r("img",{staticClass:"flex-shrink-0 h-6 w-6 rounded-full",attrs:{src:"https://avatars.dicebear.com/api/identicon/"+t.wallet.selectedAccount.account.address+".svg",alt:"person"}}),t._v(" "),r("span",{staticClass:"ml-3 block truncate"},[t._v("\n              "+t._s(t.wallet.selectedAccount.account.meta.name)+" - ("+t._s(t.wallet.selectedAccount.balanceFormatted)+") - "+t._s(t.addressShort(t.wallet.selectedAccount.account.address))+"\n            ")])]),t._v(" "),r("span",{staticClass:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[r("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:t.showAccountChoose,expression:"showAccountChoose"}],staticClass:"absolute mt-1 w-full z-10 rounded-md bg-white dark:bg-gray-600 shadow-lg"},[r("ul",{staticClass:"max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",attrs:{tabindex:"-1",role:"listbox","aria-labelledby":"listbox-label","aria-activedescendant":"listbox-item-3"}},t._l(t.wallet.accounts,(function(e,n){return r("li",{key:n,staticClass:"text-gray-900 dark:text-white  cursor-default hover:bg-indigo-500 hover:text-white select-none relative py-2 pl-3 pr-9",attrs:{id:"listbox-item-0",value:e,role:"option"},on:{click:function(){t.selectAccount(e),t.showAccountChoose=!1}}},[r("div",{staticClass:"flex items-center"},[r("img",{staticClass:"flex-shrink-0 h-6 w-6 rounded-full",attrs:{src:"https://avatars.dicebear.com/api/identicon/"+e.address+".svg",alt:"person"}}),t._v(" "),r("span",{staticClass:"ml-3 block font-normal truncate"},[t._v("\n                  "+t._s(e.meta.name)+" - "+t._s(t.addressShort(e.address))+"\n                ")])]),t._v(" "),r("span",{directives:[{name:"show",rawName:"v-show",value:t.wallet.selectedAccount.account.address===e.address,expression:"wallet.selectedAccount.account.address===account.address"}],staticClass:"absolute inset-y-0 right-0 flex items-center pr-4"},[r("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[r("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])])])})),0)])]):t._e()])])])}),[],!1,null,null,null);e.default=component.exports},597:function(t,e,r){"use strict";r.r(e);var n={name:"CardContainer",props:{title:{type:String,required:!1}}},o=r(28),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"w-full"},[r("div",{staticClass:"shadow-lg px-4 py-2 w-full bg-white dark:bg-gray-600 relative"},[r("p",{staticClass:"text-lh w-max text-gray-700 dark:text-white font-semibold border-b border-gray-200"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._t("default")],2)])}),[],!1,null,"bb01cc82",null);e.default=component.exports},666:function(t,e,r){"use strict";r.r(e);var n={name:"SidePanel",props:["active"]},o=r(28),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"h-screen hidden lg:block shadow-lg relative w-80"},[r("div",{staticClass:"bg-white h-full dark:bg-gray-700"},[t._m(0),t._v(" "),r("nav",{staticClass:"mt-6"},[r("div",[r("NuxtLink",{staticClass:"w-full flex items-center pl-6 p-2 my-2 transition-colors duration-200 justify-start border-l-4",class:{"text-gray-800 dark:text-white border-purple-500":"Home"===t.active,"text-gray-400 flex items-center hover:text-gray-800 border-transparent":"Records"===t.active},attrs:{to:"/"}},[r("span",{staticClass:"text-left"},[r("svg",{attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M1472 992v480q0 26-19 45t-45 19h-384v-384h-256v384h-384q-26 0-45-19t-19-45v-480q0-1 .5-3t.5-3l575-474 575 474q1 2 1 6zm223-69l-62 74q-8 9-21 11h-3q-13 0-21-7l-692-577-692 577q-12 8-24 7-13-2-21-11l-62-74q-8-10-7-23.5t11-21.5l719-599q32-26 76-26t76 26l244 204v-195q0-14 9-23t23-9h192q14 0 23 9t9 23v408l219 182q10 8 11 21.5t-7 23.5z"}})])]),t._v(" "),r("span",{staticClass:"text-sm font-normal",class:{"mx-4":"Records"===t.active,"mx-2":"Home"===t.active}},[t._v("\n            Home\n          ")])]),t._v(" "),r("NuxtLink",{staticClass:"w-full flex items-center pl-6 p-2 my-2 transition-colors duration-200 justify-start border-l-4",class:{"text-gray-800 dark:text-white border-purple-500":"Records"===t.active,"text-gray-400 flex items-center hover:text-gray-800 border-transparent":"Home"===t.active},attrs:{to:"/records"}},[r("span",{staticClass:"text-left"},[r("svg",{attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M1728 608v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"}})])]),t._v(" "),r("span",{staticClass:"text-sm font-normal",class:{"mx-4":"Home"===t.active,"mx-2":"Records"===t.active}},[t._v("\n            Records\n          ")])])],1)])])])}),[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex items-center justify-start pt-6 ml-8"},[r("p",{staticClass:"font-bold dark:text-white text-xl"},[t._v("\n        Merklebot\n      ")])])}],!1,null,null,null);e.default=component.exports},667:function(t,e,r){"use strict";r.r(e);var n={name:"HeaderPanel"},o=r(28),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"w-full h-16 z-40 flex items-center justify-between"},[r("div",{staticClass:"block lg:hidden ml-6"},[r("button",{staticClass:"flex p-2 items-center rounded-full bg-white shadow text-gray-500 text-md"},[r("svg",{staticClass:"text-gray-400",attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"}})])])]),t._v(" "),r("div",{staticClass:"relative z-20 flex flex-col justify-end h-full px-3 md:w-full"},[r("AccountChooser")],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AccountChooser:r(596).default})},839:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(64),r(76),r(44),r(21),r(43),r(572)),l=r(829),c=r(975),d=r(842),v=r(94),f=r(79),h=r.n(f),m=r(830),x=Object(v.b)({props:["rosbagUrl"],setup:function(t){var e=t.rosbagUrl,r=Object(v.f)(null),f=Object(v.f)(.01),x=Object(v.f)(null),w=Object(v.f)([]),C=Object(v.f)(!1),_="/urdf/spot.urdf.xacro",y=new c.a,k=new o.Scene,j=new o.PlaneGeometry(8,8),O=new o.MeshBasicMaterial({color:"#BBBBBB",side:o.DoubleSide}),I=new o.Mesh(j,O),A=new o.PerspectiveCamera(75,4/3,.1,1e3),S=new o.WebGLRenderer({antialias:!0}),z=new o.DirectionalLight("hsl(0, 100%, 100%)"),R=new o.AxesHelper(5),L=null;A.position.z=0,A.position.y=.8,A.position.x=1,I.rotation.x=Math.PI/2,I.position.y=0,k.add(A),k.add(z),k.add(R),k.add(I),y.load(_,(function(t){var e=new d.a;e.workingPath=o.LoaderUtils.extractUrlBase(_),L=e.parse(t),console.log("Robot parsed"),console.log(L.joints),L.rotation.x=-Math.PI/2,k.add(L)})),S.setSize(400,300),z.position.set(5,5,0),k.background=new o.Color("hsl(0, 100%, 100%)");var P=new l.a(A,S.domElement);P.rotateSpeed=1,P.zoomSpeed=5,P.panSpeed=.8,P.noZoom=!1,P.noPan=!1,P.staticMoving=!0,P.dynamicDampingFactor=.3;var B=Object(v.f)(0),animate=function animate(){if(setTimeout((function(){requestAnimationFrame(animate)}),1e3/30),S.render(k,A),C.value){B.value>w.value.length-1&&(B.value=0,C.value=!1);var t=w.value[B.value][0],e=w.value[B.value][1];x.value||(x.value={y:e.translation.z,x:e.translation.x,z:-e.translation.y}),L.position.y=e.translation.z-x.value.y+.1,L.position.x=e.translation.x-x.value.x,L.position.z=-e.translation.y-x.value.z;var r=new o.Euler;r.setFromQuaternion(new o.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),console.log(e.rotation),console.log(r),L.rotation.x=-Math.PI/2,L.rotation.x=r.z-Math.PI,L.rotation.y=-r.x,L.rotation.z=r.y,console.log(L.rotation.x);for(var n=0;n<t.position.length;n++)L.joints[t.name[n]].setJointValue(t.position[n]);B.value+=1}P.update()};Object(v.d)((function(){r.value.appendChild(S.domElement),animate(),console.log("ROSBAG LINK"),console.log(e)}));var M=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()({url:e,method:"GET",responseType:"blob"});case 2:return r=t.sent,console.log(r),n=new Blob([r.data]),console.log(n),t.next=8,Object(m.open)(n);case 8:return o=t.sent,console.log(o),l=null,t.next=13,o.readMessages({topics:["/tf","/joint_states"]},(function(t){console.log(t.message),"/tf"===t.topic&&4===t.message.transforms.length?t.message.transforms.forEach((function(t){"body"===t.child_frame_id&&(l=t.transform)})):"/joint_states"===t.topic&&l&&w.value.push([t.message,l])}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Start playing rosbag"),console.log(e.value),t.next=4,M(e);case 4:console.log(w.value),C.value=!0;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{scene:k,camera:A,controls:[],renderer:S,light:z,axes:R,speed:f,stage:r,playBag:E}}}),w=x,C=r(28),component=Object(C.a)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{ref:"stage",staticClass:"stage"}),t._v(" "),r("button",{staticClass:"uppercase py-2 my-2 px-4  bg-transparent dark:text-gray-800 dark:bg-white hover:dark:bg-gray-100 border-2 border-gray-800 text-gray-800 dark:text-white hover:bg-gray-800 hover:text-white text-md",attrs:{type:"button"},on:{click:t.playBag}},[t._v("\n    Play bag\n  ")])])}),[],!1,null,"3a3d8b40",null);e.default=component.exports},971:function(t,e,r){"use strict";r.r(e);var n=r(14),o=(r(47),r(78),r(64),r(94)),l=r(560),c=Object(o.b)({setup:function(){var t=Object(o.i)().value.params.record,e=Object(o.f)(null),r=Object(o.f)(null),c=Object(o.f)(null),d=Object(o.f)(null);if(!t)return{txId:null};Object(o.d)(Object(n.a)(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(l.b)({launchTxId:t});case 2:o=n.sent,console.log(o),e.value=o,r.value={ipfsCid:o.ipfs_cid,sender:o.sender,nonce:o.nonce,createdAt:o.created_at},c.value=o.launch_tx_id,d.value=o.datalog_tx_id;case 8:case"end":return n.stop()}}),n)}))));return{txId:t,launchData:e,traceInfo:r,launchTxId:c,datalogTxId:d,addressShort:function(address){return address?address.slice(0,6)+"..."+address.slice(-4):""},makeSubscanLink:function(t){return"https://robonomics.subscan.io/extrinsic/".concat(t)},makeIpfsFolderLink:function(t){var e=t.ipfsCid,r=t.sender,n=t.nonce,o=t.createdAt;return"https://merklebot.mypinata.cloud/ipfs/".concat(e,"/spot/spot.merklebot.com/spot/traces/user-").concat(r,"-cps-4FNQo2tK6PLeEhNEUuPePs8B8xKNwx15fX7tC2XnYpkC8W1j-session-").concat(n,"-").concat(o)}}}}),d=r(28),component=Object(d.a)(c,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("main",{staticClass:"bg-gray-100 dark:bg-gray-800 h-screen overflow-hidden relative"},[r("div",{staticClass:"flex items-start justify-between"},[r("SidePanel",{attrs:{active:"Records"}}),t._v(" "),r("div",{staticClass:"flex flex-col w-full md:space-y-4"},[r("HeaderPanel"),t._v(" "),r("div",{staticClass:"overflow-auto h-screen pb-24 px-4 md:px-6"},[t.txId?t._e():r("div",[r("h1",{staticClass:"text-4xl font-semibold text-gray-800 dark:text-white"},[t._v("\n            Sessions\n          ")]),t._v(" "),r("div",{staticClass:"grid grid-cols-1 gap-4 my-4"},[r("RecordsList")],1)]),t._v(" "),t.txId?r("div",[r("h1",{staticClass:"text-4xl font-semibold text-gray-800 dark:text-white"},[t._v("\n            Session "+t._s(t.txId)+"\n          ")]),t._v(" "),r("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 my-4"},[t.launchData?r("CardContainer",{attrs:{title:"Launch data"}},[r("p",{staticClass:"text-md mt-2 dark:text-white"},[t._v("\n                Robonomics Launch Tx: "),r("a",{staticClass:"text-yellow-500",attrs:{href:t.makeSubscanLink(t.launchTxId),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.launchTxId)))])]),t._v(" "),r("p",{staticClass:"text-md mt-2 dark:text-white"},[t._v("\n                Record data on IPFS: "),r("a",{staticClass:"text-yellow-500",attrs:{href:t.makeIpfsFolderLink(t.traceInfo),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.launchData.ipfs_cid)))])]),t._v(" "),r("p",{staticClass:"text-md mt-2 dark:text-white"},[t._v("\n                Robonomics Datalog Tx: "),r("a",{staticClass:"text-yellow-500",attrs:{href:t.makeSubscanLink(t.datalogTxId),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.datalogTxId)))])])]):t._e(),t._v(" "),t.launchData?r("CardContainer",{attrs:{title:"Video Record"}},[r("video",{attrs:{src:t.makeIpfsFolderLink(t.traceInfo)+"/h264_camera.mp4",type:"video/mp4",controls:""}})]):t._e(),t._v(" "),t.launchData?r("CardContainer",{attrs:{title:"Digital twin"}},[r("RosbagPlayer",{attrs:{"rosbag-url":t.makeIpfsFolderLink(t.traceInfo)+"/state.bag"}})],1):t._e()],1)]):t._e()])],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SidePanel:r(666).default,HeaderPanel:r(667).default,RecordsList:r(955).default,CardContainer:r(597).default,RosbagPlayer:r(839).default})}}]);