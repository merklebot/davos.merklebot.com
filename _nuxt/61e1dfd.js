(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{914:function(e,t,n){"use strict";n.r(t);var o=n(14),r=(n(64),n(78),n(44),n(21),n(43),n(591)),l=n(1106),c=n(903),f=n(791),d=n(94),v=Object(d.b)({props:["rosUrl","urdfUrl"],setup:function(e){console.log(e);var t=Object(d.f)(null),n=e.urdfUrl,v=Object(d.f)("wait"),h=Object(d.f)(null),w=Object(d.f)(null),m=Object(d.f)(null),y=Object(d.f)(null),x=new l.a,j=new r.Scene,O=new r.PlaneGeometry(8,8),z=new r.MeshBasicMaterial({color:"#BBBBBB",side:r.DoubleSide}),_=new r.Mesh(O,z),B=new r.PerspectiveCamera(80,4/3,.1,1e3),M=new r.WebGLRenderer({antialias:!0}),J=new r.DirectionalLight("hsl(0, 100%, 100%)"),P=new r.AxesHelper(5),C=null;B.position.z=-2.3,B.position.y=1.6,B.position.x=-3.8,B.rotation.y=-Math.PI/2-.4,_.rotation.x=Math.PI/2,_.position.y=0,j.add(B),j.add(J),j.add(P),j.add(_),x.load(n,(function(e){var t=new f.a;t.workingPath=r.LoaderUtils.extractUrlBase(n),(C=t.parse(e)).rotation.x=-Math.PI/2,j.add(C),v.value="urdf loaded"})),M.setSize(800,500),J.position.set(5,5,0),j.background=new r.Color("hsl(0, 100%, 100%)");var animate=function animate(){if(setTimeout((function(){requestAnimationFrame(animate)}),1e3/30),M.render(j,B),m.value){var e=m.value;w.value||(w.value={y:e.translation.z,x:e.translation.x,z:-e.translation.y}),C.position.y=e.translation.z-w.value.y+.1,C.position.x=e.translation.x-w.value.x,C.position.z=-e.translation.y-w.value.z;var t=new r.Euler;if(t.setFromQuaternion(new r.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),C.rotation.x=-t.y-Math.PI/2,C.rotation.y=t.x,C.rotation.z=t.z,null!==y.value)for(var n=y.value,o=0;o<n.position.length;o++)C.joints[n.name[o]].setJointValue(n.position[o])}},T=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(){var n,o,r,l,f,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.open)(t.value);case 2:return n=e.sent,o=[],r=[],l={},e.next=8,n.readMessages({topics:["/tf","/joint_states"]},(function(e){o.push(e),"/joint_states"===e.topic?l.robotJoints||(l.robotJoints=e.message):"/tf"===e.topic&&4===e.message.transforms.length&&e.message.transforms.forEach((function(e){"body"===e.child_frame_id&&(l.bodyTf||(l.bodyTf=e.transform))})),l.bodyTf&&l.robotJoints&&(r.push(Object.assign({},l)),l={})}));case 8:for(f=function(i){var e=r[i];setTimeout((function(){console.log(e),y.value=e.robotJoints,m.value=e.bodyTf}),50*i)},i=0;i<r.length;i++)f(i);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.d)((function(){h.value.appendChild(M.domElement),animate()})),{scene:j,camera:B,renderer:M,light:J,axes:P,stage:h,status:v,onFileChanged:function(e){var n=e.target;n&&n.files&&(t.value=n.files[0],T(),console.log(t.value))}}}}),h=v,w=n(25),component=Object(w.a)(h,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("input",{attrs:{type:"file"},on:{change:function(t){return e.onFileChanged(t)}}})]),e._v(" "),n("div",[e._v("status: "+e._s(e.status))]),e._v(" "),n("div",{ref:"stage",staticClass:"stage"})])}),[],!1,null,null,null);t.default=component.exports}}]);