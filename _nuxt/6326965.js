(window.webpackJsonp=window.webpackJsonp||[]).push([[58,17,38],{1081:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));var r=function(){var t=this.$createElement,e=this._self._c||t;return e("main",{staticClass:"bg-gray-800 overflow-hidden relative"},[e("div",{staticClass:"flex items-start justify-between"},[e("div",{staticClass:"flex flex-col w-full md:space-y-4"},[e("div",{staticClass:"overflow-auto pb-24 px-4 md:px-6"},[e("div",[e("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 my-4"},[e("CardContainer",{attrs:{title:"Digital twin"}},[e("RosbagPlayer",{attrs:{"urdf-url":"/urdf/spot.urdf.xacro","ros-url":"ws://localhost:8000/robots/1/realtime_ws"}})],1)],1)])])])])])},o=[]},1093:function(t,e,n){"use strict";n.r(e);var r=n(1081),o=n(786);for(var l in o)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(l);var c=n(25),component=Object(c.a)(o.default,r.a,r.b,!1,null,null,null);e.default=component.exports,installComponents(component,{RosbagPlayer:n(914).default,CardContainer:n(561).default})},561:function(t,e,n){"use strict";n.r(e);var r={name:"CardContainer",props:{title:{type:String,required:!1}}},o=n(25),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full"},[n("div",{staticClass:"shadow-lg px-4 py-2 w-full bg-gray-600 relative"},[n("p",{staticClass:"text-lh w-max text-white font-semibold border-b border-gray-200"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._t("default")],2)])}),[],!1,null,"7302cd96",null);e.default=component.exports},786:function(t,e,n){"use strict";n.r(e);var r=n(787),o=n.n(r);for(var l in r)["default"].indexOf(l)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(l);e.default=o.a},787:function(t,e){},914:function(t,e,n){"use strict";n.r(e);var r=n(14),o=(n(64),n(78),n(44),n(21),n(43),n(591)),l=n(1106),c=n(903),f=n(791),d=n(94),v=Object(d.b)({props:["rosUrl","urdfUrl"],setup:function(t){console.log(t);var e=Object(d.f)(null),n=t.urdfUrl,v=Object(d.f)("wait"),w=Object(d.f)(null),m=Object(d.f)(null),h=Object(d.f)(null),x=Object(d.f)(null),y=new l.a,C=new o.Scene,_=new o.PlaneGeometry(8,8),j=new o.MeshBasicMaterial({color:"#BBBBBB",side:o.DoubleSide}),O=new o.Mesh(_,j),z=new o.PerspectiveCamera(80,4/3,.1,1e3),P=new o.WebGLRenderer({antialias:!0}),B=new o.DirectionalLight("hsl(0, 100%, 100%)"),M=new o.AxesHelper(5),J=null;z.position.z=-2.3,z.position.y=1.6,z.position.x=-3.8,z.rotation.y=-Math.PI/2-.4,O.rotation.x=Math.PI/2,O.position.y=0,C.add(z),C.add(B),C.add(M),C.add(O),y.load(n,(function(t){var e=new f.a;e.workingPath=o.LoaderUtils.extractUrlBase(n),(J=e.parse(t)).rotation.x=-Math.PI/2,C.add(J),v.value="urdf loaded"})),P.setSize(800,500),B.position.set(5,5,0),C.background=new o.Color("hsl(0, 100%, 100%)");var animate=function animate(){if(setTimeout((function(){requestAnimationFrame(animate)}),1e3/30),P.render(C,z),h.value){var t=h.value;m.value||(m.value={y:t.translation.z,x:t.translation.x,z:-t.translation.y}),J.position.y=t.translation.z-m.value.y+.1,J.position.x=t.translation.x-m.value.x,J.position.z=-t.translation.y-m.value.z;var e=new o.Euler;if(e.setFromQuaternion(new o.Quaternion(t.rotation.x,t.rotation.y,t.rotation.z,t.rotation.w)),J.rotation.x=-e.y-Math.PI/2,J.rotation.y=e.x,J.rotation.z=e.z,null!==x.value)for(var n=x.value,r=0;r<n.position.length;r++)J.joints[n.name[r]].setJointValue(n.position[r])}},E=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,f,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(c.open)(e.value);case 2:return n=t.sent,r=[],o=[],l={},t.next=8,n.readMessages({topics:["/tf","/joint_states"]},(function(t){r.push(t),"/joint_states"===t.topic?l.robotJoints||(l.robotJoints=t.message):"/tf"===t.topic&&4===t.message.transforms.length&&t.message.transforms.forEach((function(t){"body"===t.child_frame_id&&(l.bodyTf||(l.bodyTf=t.transform))})),l.bodyTf&&l.robotJoints&&(o.push(Object.assign({},l)),l={})}));case 8:for(f=function(i){var t=o[i];setTimeout((function(){console.log(t),x.value=t.robotJoints,h.value=t.bodyTf}),50*i)},i=0;i<o.length;i++)f(i);case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(d.d)((function(){w.value.appendChild(P.domElement),animate()})),{scene:C,camera:z,renderer:P,light:B,axes:M,stage:w,status:v,onFileChanged:function(t){var n=t.target;n&&n.files&&(e.value=n.files[0],E(),console.log(e.value))}}}}),w=v,m=n(25),component=Object(m.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",[n("input",{attrs:{type:"file"},on:{change:function(e){return t.onFileChanged(e)}}})]),t._v(" "),n("div",[t._v("status: "+t._s(t.status))]),t._v(" "),n("div",{ref:"stage",staticClass:"stage"})])}),[],!1,null,null,null);e.default=component.exports}}]);