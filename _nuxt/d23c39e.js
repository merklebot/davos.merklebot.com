(window.webpackJsonp=window.webpackJsonp||[]).push([[28,11,20,21],{596:function(t,e,n){"use strict";n.r(e);n(47);var r=n(94),l=n(561),o=Object(r.b)({setup:function(){var t=Object(l.a)(),e=Object(r.f)(!1);Object(r.d)((function(){t.connectWallet()}));return{showAccountChoose:e,selectAccount:function(e){t.setActiveAccount(e)},addressShort:function(address){return address.slice(0,6)+"..."+address.slice(-4)},wallet:t}}}),c=n(28),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticClass:"relative p-1 flex items-center w-full space-x-4 justify-end"},[n("div",{staticClass:"w-128"},[t.wallet.selectedAccount.account?n("div",{staticClass:"mt-1 relative"},[n("button",{staticClass:"relative w-full bg-gray-600 text-white rounded-md shadow-lg pl-3 pr-10 py-3 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-white sm:text-sm",attrs:{type:"button"},on:{click:function(){return t.showAccountChoose=!t.showAccountChoose}}},[n("span",{staticClass:"flex items-center"},[n("img",{staticClass:"flex-shrink-0 h-6 w-6 rounded-full",attrs:{src:"https://avatars.dicebear.com/api/identicon/"+t.wallet.selectedAccount.account.address+".svg",alt:"person"}}),t._v(" "),n("span",{staticClass:"ml-3 block truncate"},[t._v("\n              "+t._s(t.wallet.selectedAccount.account.meta.name)+" - ("+t._s(t.wallet.selectedAccount.balanceFormatted)+") - "+t._s(t.addressShort(t.wallet.selectedAccount.account.address))+"\n            ")])]),t._v(" "),n("span",{staticClass:"ml-3 absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none"},[n("svg",{staticClass:"h-5 w-5 text-gray-400",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z","clip-rule":"evenodd"}})])])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showAccountChoose,expression:"showAccountChoose"}],staticClass:"absolute mt-1 w-full z-10 rounded-md bg-gray-600 shadow-lg"},[n("ul",{staticClass:"max-h-56 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm",attrs:{tabindex:"-1",role:"listbox","aria-labelledby":"listbox-label","aria-activedescendant":"listbox-item-3"}},t._l(t.wallet.accounts,(function(e,r){return n("li",{key:r,staticClass:"text-white  cursor-default hover:bg-indigo-500 hover:text-white select-none relative py-2 pl-3 pr-9",attrs:{id:"listbox-item-0",value:e,role:"option"},on:{click:function(){t.selectAccount(e),t.showAccountChoose=!1}}},[n("div",{staticClass:"flex items-center"},[n("img",{staticClass:"flex-shrink-0 h-6 w-6 rounded-full",attrs:{src:"https://avatars.dicebear.com/api/identicon/"+e.address+".svg",alt:"person"}}),t._v(" "),n("span",{staticClass:"ml-3 block font-normal truncate"},[t._v("\n                  "+t._s(e.meta.name)+" - "+t._s(t.addressShort(e.address))+"\n                ")])]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.wallet.selectedAccount.account.address===e.address,expression:"wallet.selectedAccount.account.address===account.address"}],staticClass:"absolute inset-y-0 right-0 flex items-center pr-4"},[n("svg",{staticClass:"h-5 w-5",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"}},[n("path",{attrs:{"fill-rule":"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z","clip-rule":"evenodd"}})])])])})),0)])]):t._e()])])])}),[],!1,null,null,null);e.default=component.exports},597:function(t,e,n){"use strict";n.r(e);var r={name:"CardContainer",props:{title:{type:String,required:!1}}},l=n(28),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-full"},[n("div",{staticClass:"shadow-lg px-4 py-2 w-full bg-gray-600 relative"},[n("p",{staticClass:"text-lh w-max text-white font-semibold border-b border-gray-200"},[t._v("\n      "+t._s(t.title)+"\n    ")]),t._v(" "),t._t("default")],2)])}),[],!1,null,"7302cd96",null);e.default=component.exports},666:function(t,e,n){"use strict";n.r(e);var r={name:"SidePanel",props:["active"]},l=n(28),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"h-screen hidden lg:block shadow-lg relative w-80"},[n("div",{staticClass:"bg-gray-200 h-full bg-gray-700"},[t._m(0),t._v(" "),n("nav",{staticClass:"mt-6"},[n("div",[n("NuxtLink",{staticClass:"w-full flex items-center pl-6 p-2 my-2 transition-colors duration-200 justify-start border-l-4",class:{"text-gray-800 text-white border-purple-500":"Home"===t.active,"text-gray-400 flex items-center hover:text-gray-800 border-transparent":"Records"===t.active},attrs:{to:"/"}},[n("span",{staticClass:"text-left"},[n("svg",{attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M1472 992v480q0 26-19 45t-45 19h-384v-384h-256v384h-384q-26 0-45-19t-19-45v-480q0-1 .5-3t.5-3l575-474 575 474q1 2 1 6zm223-69l-62 74q-8 9-21 11h-3q-13 0-21-7l-692-577-692 577q-12 8-24 7-13-2-21-11l-62-74q-8-10-7-23.5t11-21.5l719-599q32-26 76-26t76 26l244 204v-195q0-14 9-23t23-9h192q14 0 23 9t9 23v408l219 182q10 8 11 21.5t-7 23.5z"}})])]),t._v(" "),n("span",{staticClass:"text-sm font-normal",class:{"mx-4":"Records"===t.active,"mx-2":"Home"===t.active}},[t._v("\n            Home\n          ")])]),t._v(" "),n("NuxtLink",{staticClass:"w-full flex items-center pl-6 p-2 my-2 transition-colors duration-200 justify-start border-l-4",class:{"text-white border-purple-500":"Records"===t.active,"text-gray-400 flex items-center hover:text-gray-800 border-transparent":"Home"===t.active},attrs:{to:"/records"}},[n("span",{staticClass:"text-left"},[n("svg",{attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M1728 608v704q0 92-66 158t-158 66h-1216q-92 0-158-66t-66-158v-960q0-92 66-158t158-66h320q92 0 158 66t66 158v32h672q92 0 158 66t66 158z"}})])]),t._v(" "),n("span",{staticClass:"text-sm font-normal",class:{"mx-4":"Home"===t.active,"mx-2":"Records"===t.active}},[t._v("\n            Records\n          ")])])],1)])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"flex items-center justify-start pt-6 ml-8"},[n("p",{staticClass:"font-bold text-white text-xl"},[t._v("\n        Merklebot\n      ")])])}],!1,null,null,null);e.default=component.exports},667:function(t,e,n){"use strict";n.r(e);var r={name:"HeaderPanel"},l=n(28),component=Object(l.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"w-full h-16 z-40 flex items-center justify-between"},[n("div",{staticClass:"block lg:hidden ml-6"},[n("button",{staticClass:"flex p-2 items-center rounded-full bg-white shadow text-gray-500 text-md"},[n("svg",{staticClass:"text-gray-400",attrs:{width:"20",height:"20",fill:"currentColor",viewBox:"0 0 1792 1792",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{d:"M1664 1344v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45zm0-512v128q0 26-19 45t-45 19h-1408q-26 0-45-19t-19-45v-128q0-26 19-45t45-19h1408q26 0 45 19t19 45z"}})])])]),t._v(" "),n("div",{staticClass:"relative z-20 flex flex-col justify-end h-full px-3 md:w-full"},[n("AccountChooser")],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{AccountChooser:n(596).default})},839:function(t,e,n){"use strict";n.r(e);var r=n(14),l=(n(64),n(77),n(44),n(21),n(43),n(572)),o=n(829),c=n(975),d=n(842),v=n(94),f=n(79),h=n.n(f),m=n(830),x=Object(v.b)({props:["rosbagUrl"],setup:function(t){var e=t.rosbagUrl,n=Object(v.f)(null),f=Object(v.f)(.01),x=Object(v.f)(null),w=Object(v.f)([]),_=Object(v.f)(!1),C="/urdf/spot.urdf.xacro",y=new c.a,k=new l.Scene,j=new l.PlaneGeometry(8,8),O=new l.MeshBasicMaterial({color:"#BBBBBB",side:l.DoubleSide}),I=new l.Mesh(j,O),S=new l.PerspectiveCamera(75,4/3,.1,1e3),A=new l.WebGLRenderer({antialias:!0}),R=new l.DirectionalLight("hsl(0, 100%, 100%)"),z=new l.AxesHelper(5),L=null;S.position.z=0,S.position.y=.8,S.position.x=1,I.rotation.x=Math.PI/2,I.position.y=0,k.add(S),k.add(R),k.add(z),k.add(I),y.load(C,(function(t){var e=new d.a;e.workingPath=l.LoaderUtils.extractUrlBase(C),L=e.parse(t),console.log("Robot parsed"),console.log(L.joints),L.rotation.x=-Math.PI/2,k.add(L)})),A.setSize(400,300),R.position.set(5,5,0),k.background=new l.Color("hsl(0, 100%, 100%)");var P=new o.a(S,A.domElement);P.rotateSpeed=1,P.zoomSpeed=5,P.panSpeed=.8,P.noZoom=!1,P.noPan=!1,P.staticMoving=!0,P.dynamicDampingFactor=.3;var B=Object(v.f)(0),animate=function animate(){if(setTimeout((function(){requestAnimationFrame(animate)}),1e3/30),A.render(k,S),_.value){B.value>w.value.length-1&&(B.value=0,_.value=!1);var t=w.value[B.value][0],e=w.value[B.value][1];x.value||(x.value={y:e.translation.z,x:e.translation.x,z:-e.translation.y}),L.position.y=e.translation.z-x.value.y+.1,L.position.x=e.translation.x-x.value.x,L.position.z=-e.translation.y-x.value.z;var n=new l.Euler;n.setFromQuaternion(new l.Quaternion(e.rotation.x,e.rotation.y,e.rotation.z,e.rotation.w)),console.log(e.rotation),console.log(n),L.rotation.x=-Math.PI/2,L.rotation.y=-n.x,L.rotation.z=n.y,console.log(L.rotation.x);for(var r=0;r<t.position.length;r++)L.joints[t.name[r]].setJointValue(t.position[r]);B.value+=1}P.update()};Object(v.d)((function(){n.value.appendChild(A.domElement),animate(),console.log("ROSBAG LINK"),console.log(e)}));var T=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,l,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h()({url:e,method:"GET",responseType:"blob"});case 2:return n=t.sent,console.log(n),r=new Blob([n.data]),console.log(r),t.next=8,Object(m.open)(r);case 8:return l=t.sent,console.log(l),o=null,t.next=13,l.readMessages({topics:["/tf","/joint_states"]},(function(t){console.log(t.message),"/tf"===t.topic&&4===t.message.transforms.length?t.message.transforms.forEach((function(t){"body"===t.child_frame_id&&(o=t.transform)})):"/joint_states"===t.topic&&o&&w.value.push([t.message,o])}));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Start playing rosbag"),console.log(e.value),t.next=4,T(e);case 4:console.log(w.value),_.value=!0;case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{scene:k,camera:S,controls:[],renderer:A,light:R,axes:z,speed:f,stage:n,playBag:E}}}),w=x,_=n(28),component=Object(_.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{ref:"stage",staticClass:"stage"}),t._v(" "),n("button",{staticClass:"uppercase py-2 my-2 px-4  bg-transparent text-gray-800 bg-gray-200 hover:bg-gray-100 border-2 border-gray-800 text-gray-800 text-white hover:bg-gray-800 hover:text-white text-md",attrs:{type:"button"},on:{click:t.playBag}},[t._v("\n    Play bag\n  ")])])}),[],!1,null,"4e4b5f04",null);e.default=component.exports},971:function(t,e,n){"use strict";n.r(e);var r=n(14),l=(n(47),n(76),n(64),n(94)),o=n(560),c=n(556),d=Object(l.b)({setup:function(){var t=Object(l.i)().value.params.record,e=Object(l.f)(null),n=Object(l.f)(null),d=Object(l.f)(null),v=Object(l.f)(null),f=Object(l.f)(null);if(!t)return{txId:null};Object(l.d)(Object(r.a)(regeneratorRuntime.mark((function r(){var l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(o.b)({launchTxId:t});case 2:l=r.sent,console.log(l),e.value=l,n.value={ipfsCid:l.ipfs_cid,sender:l.sender,nonce:l.nonce,createdAt:l.created_at},d.value=l.launch_tx_id,v.value=l.datalog_tx_id,f.value=l.crust_tx_id;case 9:case"end":return r.stop()}}),r)}))));return{txId:t,launchData:e,traceInfo:n,launchTxId:d,datalogTxId:v,crustTxId:f,addressShort:function(address){return address?address.slice(0,6)+"..."+address.slice(-4):""},makeSubscanLink:c.c,makeIpfsFolderLink:function(t){var e=t.ipfsCid,n=t.sender,r=t.nonce,l=t.createdAt;return"https://merklebot.mypinata.cloud/ipfs/".concat(e,"/spot/spot.merklebot.com/spot/traces/user-").concat(n,"-cps-4FNQo2tK6PLeEhNEUuPePs8B8xKNwx15fX7tC2XnYpkC8W1j-session-").concat(r,"-").concat(l)}}}}),v=n(28),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"bg-gray-800 h-screen overflow-hidden relative"},[n("div",{staticClass:"flex items-start justify-between"},[n("SidePanel",{attrs:{active:"Records"}}),t._v(" "),n("div",{staticClass:"flex flex-col w-full md:space-y-4"},[n("HeaderPanel"),t._v(" "),n("div",{staticClass:"overflow-auto h-screen pb-24 px-4 md:px-6"},[t.txId?t._e():n("div",[n("h1",{staticClass:"text-4xl font-semibold text-white"},[t._v("\n            Sessions\n          ")]),t._v(" "),n("div",{staticClass:"grid grid-cols-1 gap-4 my-4"},[n("RecordsList")],1)]),t._v(" "),t.txId?n("div",[n("h1",{staticClass:"text-4xl font-semibold text-white"},[t._v("\n            Session "+t._s(t.txId)+"\n          ")]),t._v(" "),n("div",{staticClass:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-2 gap-4 my-4"},[t.launchData?n("CardContainer",{attrs:{title:"Launch data"}},[n("p",{staticClass:"text-md mt-2 text-white"},[t._v("\n                Robonomics Launch Tx: "),n("a",{staticClass:"text-yellow-500",attrs:{href:t.makeSubscanLink(t.launchTxId),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.launchTxId)))])]),t._v(" "),n("p",{staticClass:"text-md mt-2 text-white"},[t._v("\n                Record data on IPFS: "),n("a",{staticClass:"text-yellow-500",attrs:{href:t.makeIpfsFolderLink(t.traceInfo),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.launchData.ipfs_cid)))])]),t._v(" "),n("p",{staticClass:"text-md mt-2 text-white"},[t._v("\n                Robonomics Datalog Tx: "),n("a",{staticClass:"text-yellow-500",attrs:{href:t.makeSubscanLink(t.datalogTxId),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.datalogTxId)))])]),t._v(" "),n("p",{staticClass:"text-md mt-2 text-white"},[t._v("\n                Crust Storage Order Tx: "),n("a",{staticClass:"text-yellow-500",attrs:{href:t.makeSubscanLink("crust",t.crustTxId),target:"_blank",rel:"noopener noreferrer"}},[t._v(t._s(t.addressShort(t.crustTxId)))])])]):t._e(),t._v(" "),t.launchData?n("CardContainer",{attrs:{title:"Video Record"}},[n("video",{attrs:{src:t.makeIpfsFolderLink(t.traceInfo)+"/h264_camera.mp4",type:"video/mp4",controls:""}})]):t._e(),t._v(" "),t.launchData?n("CardContainer",{attrs:{title:"Digital twin"}},[n("RosbagPlayer",{attrs:{"rosbag-url":t.makeIpfsFolderLink(t.traceInfo)+"/state.bag"}})],1):t._e()],1)]):t._e()])],1)],1)])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{SidePanel:n(666).default,HeaderPanel:n(667).default,RecordsList:n(955).default,CardContainer:n(597).default,RosbagPlayer:n(839).default})}}]);